<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="site.book.team.dao.G_BookDAO">
	<select id="numOfBookByDate" resultType="java.util.HashMap">
		SELECT DATE_FORMAT(regdate,'%Y-%m-%d') d, COUNT(*) as c FROM G_BOOK GROUP BY d
	</select>
	
	<delete id="deleteGroupBook">
		DELETE FROM G_BOOK WHERE uid = #{uid} AND URL IS NOT NULL
	</delete>
	

	<select id="selectGroupViews" resultType="Integer">
		select COALESCE(SUM(VIEW),0) from TEAM t join G_BOOK gb on t.gid = gb.gid where t.gid = #{gid}
	</select>

	<select id="getCompletedTeamBookmark" resultType="site.book.team.dto.G_BookDTO">
		SELECT * FROM G_BOOK WHERE GID=#{gid}
	</select>
</mapper>